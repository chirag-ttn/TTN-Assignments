<!DOCTYPE html>
<!-- saved from url=(0076)https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/ -->
<html lang="en" data-theme="light" data-react-helmet="lang"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="https://redux.js.org/blog/rss.xml" title="Redux Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="https://redux.js.org/blog/atom.xml" title="Redux Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com/">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-130598673-1","auto"),ga("send","pageview")</script>
<script async="" src="./Immutable Update Patterns _ Redux_files/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux" href="https://redux.js.org/opensearch.xml"><title>Immutable Update Patterns | Redux</title><meta data-react-helmet="true" property="og:image" content="https://redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image" content="https://redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Redux"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" property="og:title" content="Immutable Update Patterns | Redux"><meta data-react-helmet="true" name="description" content="Structuring Reducers &gt; Immutable Update Patterns: How to correctly update state immutably, with examples of common mistakes"><meta data-react-helmet="true" property="og:description" content="Structuring Reducers &gt; Immutable Update Patterns: How to correctly update state immutably, with examples of common mistakes"><meta data-react-helmet="true" property="og:url" content="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns"><link data-react-helmet="true" rel="shortcut icon" href="https://redux.js.org/img/favicon/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://bh4d9od16a-dsn.algolia.net/" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns"><link rel="stylesheet" href="./Immutable Update Patterns _ Redux_files/styles.db15924c.css">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/styles.d769c6f0.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/runtime_main.187fb712.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/main.3eee0df9.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/1.643e92d1.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/2.265c5038.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/83.e9376293.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/86.499b2dd9.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js" as="script">
<link rel="preload" href="./Immutable Update Patterns _ Redux_files/f65c68cc.4cb8caf6.js" as="script">
<script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/1.643e92d1.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/2.265c5038.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/83.e9376293.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/f65c68cc.4cb8caf6.js"></script><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/bfd7c810.42896b52.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/5d5abd3d.e9c8b7ae.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/6d12da77.6504d5b2.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/8281e42f.7bdb1528.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/fcc2861d.a8a9aa23.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/b67e346f.7dc10a98.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/41bfb974.5112eec1.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/6fb1842e.d5008156.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/5a81eb9b.9ce59726.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/faadf69e.a2d46078.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/56989e19.427999b9.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/b01a8152.fa4a9bff.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/8e532af9.01baa83e.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/4e97a8e5.10ee3b36.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/8e4e2783.99f19431.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/94f24d71.ca77e05f.js"><link rel="prefetch" href="https://redux.js.org/c4f5d8e4.5b6c84f2.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"><link rel="prefetch" href="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"><link rel="prefetch" href="https://redux.js.org/b1380c1e.4e98c200.js"><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/84.9e66879f.js"></script><script charset="utf-8" src="./Immutable Update Patterns _ Redux_files/85.c3b41ac4.js"></script></head>
<body style="overflow: visible;">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus"><nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="https://redux.js.org/"><img src="./Immutable Update Patterns _ Redux_files/redux.svg" alt="Redux Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><strong class="navbar__title">Redux</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="https://redux.js.org/introduction/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts">Tutorial</a><a class="navbar__item navbar__link" href="https://redux.js.org/api/api-reference">API</a><a class="navbar__item navbar__link" href="https://redux.js.org/faq">FAQ</a><a class="navbar__item navbar__link" href="https://redux.js.org/style-guide/style-guide">Best Practices</a><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><a class="navbar__item navbar__link" href="https://redux.js.org/introduction/getting-started#help-and-discussion">Need help?</a><div class="react-toggle displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input aria-label="Dark mode toggle" class="react-toggle-screenreader-only" type="checkbox"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><span class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></span><span class="DocSearch-Button-Key">K</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="https://redux.js.org/"><img src="./Immutable Update Patterns _ Redux_files/redux.svg" alt="Redux Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><strong class="navbar__title">Redux</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/introduction/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts">Tutorial</a></li><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/api/api-reference">API</a></li><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/style-guide/style-guide">Best Practices</a></li><li class="menu__list-item"><a href="https://www.github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a class="menu__link" href="https://redux.js.org/introduction/getting-started#help-and-discussion">Need help?</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/getting-started">Getting Started with Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/core-concepts">Core Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/learning-resources">Learning Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/ecosystem">Ecosystem</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/introduction/examples">Examples</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Tutorials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/index">Tutorials Index</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!" tabindex="-1">Redux Essentials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts">Redux Overview and Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-2-app-structure">Redux App Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-3-data-flow">Basic Redux Data Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-4-using-data">Using Redux Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-5-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/essentials/part-6-performance-normalization">Performance and Normalizing Data</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!" tabindex="-1">Redux Fundamentals</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-1-overview">Redux Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow">Redux Concepts and Data Flow</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-3-state-actions-reducers">State, Actions, and Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-4-store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-5-ui-react">UI and React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-6-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-7-standard-patterns">Standard Redux Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/tutorials/fundamentals/part-8-modern-redux">Modern Redux with Redux Toolkit</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Recipes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/recipe-index">Recipes: Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/configuring-your-store">Configuring Your Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/usage-with-typescript">Usage With TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/migrating-to-redux">Migrating to Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/using-object-spread-operator">Using Object Spread Operator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/reducing-boilerplate">Reducing Boilerplate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/server-rendering">Server Rendering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/writing-tests">Writing Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/computing-derived-data">Computing Derived Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/implementing-undo-history">Implementing Undo History</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/isolating-redux-sub-apps">Isolating Redux Sub-Apps</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/using-immutablejs-with-redux">Using Immutable.JS with Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/code-splitting">Code Splitting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/troubleshooting">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!" tabindex="0">Structuring Reducers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/structuring-reducers">Structuring Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/prerequisite-concepts">Prerequisite Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/basic-reducer-structure">Basic Reducer Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/splitting-reducer-logic">Splitting Reducer Logic</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/refactoring-reducer-example">Refactoring Reducers Example</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/using-combinereducers">Using combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/beyond-combinereducers">Beyond combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/normalizing-state-shape">Normalizing State Shape</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/updating-normalized-data">Updating Normalized Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/reusing-reducer-logic">Reusing Reducer Logic</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns">Immutable Update Patterns</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="https://redux.js.org/recipes/structuring-reducers/initializing-state">Initializing State</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Understanding Redux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!" tabindex="-1">Thinking in Redux</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/understanding/thinking-in-redux/motivation">Motivation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/understanding/thinking-in-redux/three-principles">Three Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/understanding/thinking-in-redux/glossary">Glossary</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!" tabindex="-1">History and Design</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/understanding/history-and-design/prior-art">Prior Art</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/understanding/history-and-design/middleware">Middleware</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq">FAQ Index</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/general">General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/reducers">Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/organizing-state">Organizing State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/store-setup">Store Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/immutable-data">Immutable Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/code-structure">Code Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/performance">Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/design-decisions">Design Decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/react-redux">React Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/faq/miscellaneous">Miscellaneous</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Style Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/style-guide/style-guide">Style Guide: Best Practices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">API Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/createstore">createStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/combinereducers">combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/applymiddleware">applyMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/bindactioncreators">bindActionCreators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/api/compose">compose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#!">Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="https://redux.js.org/redux-toolkit/overview">Redux Toolkit: Overview</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="immutable-update-patterns"></a>Immutable Update Patterns<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#immutable-update-patterns" title="Direct link to heading">#</a></h1><p>The articles listed in <a href="https://redux.js.org/recipes/structuring-reducers/prerequisite-concepts#immutable-data-management">Prerequisite Concepts#Immutable Data Management</a> give a number of good examples for how to perform basic update operations immutably, such as updating a field in an object or adding an item to the end of an array. However, reducers will often need to use those basic operations in combination to perform more complicated tasks. Here are some examples for some of the more common tasks you might have to implement.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="updating-nested-objects"></a>Updating Nested Objects<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#updating-nested-objects" title="Direct link to heading">#</a></h2><p>The key to updating nested data is <strong>that <em>every</em> level of nesting must be copied and updated appropriately</strong>. This is often a difficult concept for those learning Redux, and there are some specific problems that frequently occur when trying to update nested objects. These lead to accidental direct mutation, and should be avoided.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="correct-approach-copying-all-levels-of-nested-data"></a>Correct Approach: Copying All Levels of Nested Data<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#correct-approach-copying-all-levels-of-nested-data" title="Direct link to heading">#</a></h5><p>Unfortunately, the process of correctly applying immutable updates to deeply nested state can easily become verbose and hard to read. Here's what an example of updating <code>state.first.second[someId].fourth</code> might look like:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">updateVeryNestedField</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    first</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">first</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      second</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">first</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">second</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">          </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">first</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">second</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">          fourth</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">someValue</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Obviously, each layer of nesting makes this harder to read, and gives more chances to make mistakes. This is one of several reasons why you are encouraged to keep your state flattened, and compose reducers as much as possible.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="common-mistake-1-new-variables-that-point-to-the-same-objects"></a>Common Mistake #1: New variables that point to the same objects<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#common-mistake-1-new-variables-that-point-to-the-same-objects" title="Direct link to heading">#</a></h5><p>Defining a new variable does <em>not</em> create a new actual object - it only creates another reference to the same object. An example of this error would be:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">updateNestedState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword" style="color: rgb(249, 38, 114);">let</span><span class="token plain"> nestedState </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">nestedState</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token comment" style="color: rgb(198, 202, 210);">// ERROR: this directly modifies the existing object reference - don't do this!</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  nestedState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">nestedField</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">data</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    nestedState</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This function does correctly return a shallow copy of the top-level state object, but because the <code>nestedState</code> variable was still pointing at the existing object, the state was directly mutated.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="common-mistake-2-only-making-a-shallow-copy-of-one-level"></a>Common Mistake #2: Only making a shallow copy of one level<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#common-mistake-2-only-making-a-shallow-copy-of-one-level" title="Direct link to heading">#</a></h5><p>Another common version of this error looks like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">updateNestedState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token comment" style="color: rgb(198, 202, 210);">// Problem: this only does a shallow copy!</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword" style="color: rgb(249, 38, 114);">let</span><span class="token plain"> newState </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">state </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token comment" style="color: rgb(198, 202, 210);">// ERROR: nestedState is still the same object!</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  newState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">nestedState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">nestedField</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">data</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> newState</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Doing a shallow copy of the top level is <em>not</em> sufficient - the <code>nestedState</code> object should be copied as well.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="inserting-and-removing-items-in-arrays"></a>Inserting and Removing Items in Arrays<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#inserting-and-removing-items-in-arrays" title="Direct link to heading">#</a></h2><p>Normally, a Javascript array's contents are modified using mutative functions like <code>push</code>, <code>unshift</code>, and <code>splice</code>. Since we don't want to mutate state directly in reducers, those should normally be avoided. Because of that, you might see "insert" or "remove" behavior written like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">insertItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">item</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">removeItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">+</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>However, remember that the key is that the <em>original in-memory reference</em> is not modified. <strong>As long as we make a copy first, we can safely mutate the copy</strong>. Note that this is true for both arrays and objects, but nested values still must be updated using the same rules.</p><p>This means that we could also write the insert and remove functions like this:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">insertItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword" style="color: rgb(249, 38, 114);">let</span><span class="token plain"> newArray </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  newArray</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">splice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">item</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> newArray</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">removeItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword" style="color: rgb(249, 38, 114);">let</span><span class="token plain"> newArray </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">slice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  newArray</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">splice</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> newArray</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The remove function could also be implemented as:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">removeItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">filter</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">item</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: rgb(248, 248, 242);">=&gt;</span><span class="token plain"> index </span><span class="token operator" style="color: rgb(248, 248, 242);">!==</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="updating-an-item-in-an-array"></a>Updating an Item in an Array<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#updating-an-item-in-an-array" title="Direct link to heading">#</a></h2><p>Updating one item in an array can be accomplished by using <code>Array.map</code>, returning a new value for the item we want to update, and returning the existing values for all other items:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">function</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">updateObjectInArray</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">array</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> array</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">map</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">item</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: rgb(248, 248, 242);">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">if</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">index </span><span class="token operator" style="color: rgb(248, 248, 242);">!==</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">index</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token comment" style="color: rgb(198, 202, 210);">// This isn't the item we care about - keep it as-is</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> item</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token comment" style="color: rgb(198, 202, 210);">// Otherwise, this is the one we want - return an updated value</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword control-flow" style="color: rgb(249, 38, 114);">return</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">item</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token spread operator" style="color: rgb(248, 248, 242);">...</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">item</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="immutable-update-utility-libraries"></a>Immutable Update Utility Libraries<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#immutable-update-utility-libraries" title="Direct link to heading">#</a></h2><p>Because writing immutable update code can become tedious, there are a number of utility libraries that try to abstract out the process. These libraries vary in APIs and usage, but all try to provide a shorter and more succinct way of writing these updates. For example, <a href="https://github.com/mweststrate/immer" target="_blank" rel="noopener noreferrer">Immer</a> makes immutable updates a simple function and plain JavaScript objects:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">var</span><span class="token plain"> usersState </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> name</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'John Doe'</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> address</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> city</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'London'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">var</span><span class="token plain"> newState </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> immer</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">produce</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">usersState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token parameter">draftState</span><span class="token plain"> </span><span class="token arrow operator" style="color: rgb(248, 248, 242);">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  draftState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'Jon Doe'</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  draftState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">address</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">city</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'Paris'</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token comment" style="color: rgb(198, 202, 210);">//nested update similar to mutable way</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Some, like <a href="https://github.com/debitoor/dot-prop-immutable" target="_blank" rel="noopener noreferrer">dot-prop-immutable</a>, take string paths for commands:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">state </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> dotProp</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(230, 216, 116);">set</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color: rgb(166, 226, 46);">`</span><span class="token template-string string" style="color: rgb(166, 226, 46);">todos.</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">index</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(166, 226, 46);">.complete</span><span class="token template-string template-punctuation string" style="color: rgb(166, 226, 46);">`</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token boolean" style="color: rgb(174, 129, 255);">true</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Others, like <a href="https://github.com/kolodny/immutability-helper" target="_blank" rel="noopener noreferrer">immutability-helper</a> (a fork of the now-deprecated React Immutability Helpers addon), use nested values and helper functions:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(249, 38, 114);">var</span><span class="token plain"> collection </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> a</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">12</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">17</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">15</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">var</span><span class="token plain"> newCollection </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">update</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">collection</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token number" style="color: rgb(174, 129, 255);">2</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> a</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> $splice</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">1</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">13</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token number" style="color: rgb(174, 129, 255);">14</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>They can provide a useful alternative to writing manual immutable update logic.</p><p>A list of many immutable update utilities can be found in the <a href="https://github.com/markerikson/redux-ecosystem-links/blob/master/immutable-data.md#immutable-update-utilities" target="_blank" rel="noopener noreferrer">Immutable Data#Immutable Update Utilities</a> section of the <a href="https://github.com/markerikson/redux-ecosystem-links" target="_blank" rel="noopener noreferrer">Redux Addons Catalog</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="simplifying-immutable-updates-with-redux-toolkit"></a>Simplifying Immutable Updates with Redux Toolkit<a class="hash-link" href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#simplifying-immutable-updates-with-redux-toolkit" title="Direct link to heading">#</a></h2><p>Our <strong><a href="https://redux-toolkit.js.org/" target="_blank" rel="noopener noreferrer">Redux Toolkit</a></strong> package includes a <a href="https://redux-toolkit.js.org/api/createReducer" target="_blank" rel="noopener noreferrer"><code>createReducer</code> utility</a> that uses Immer internally.
Because of this, you can write reducers that appear to "mutate" state, but the updates are actually applied immutably.</p><p>This allows immutable update logic to be written in a much simpler way. Here's what the <a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#correct-approach-copying-all-levels-of-nested-data">nested data example</a>
might look like using <code>createReducer</code>:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color: rgb(248, 248, 242); background-color: rgb(39, 40, 34);"><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword module" style="color: rgb(249, 38, 114);">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token imports"> createReducer </span><span class="token imports punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"> </span><span class="token keyword module" style="color: rgb(249, 38, 114);">from</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'@reduxjs/toolkit'</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">const</span><span class="token plain"> initialState </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  first</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    second</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      id1</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> fourth</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'a'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      id2</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> fourth</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(166, 226, 46);">'b'</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;">
</span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(249, 38, 114);">const</span><span class="token plain"> reducer </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> </span><span class="token function" style="color: rgb(230, 216, 116);">createReducer</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">initialState</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token function-variable function maybe-class-name" style="color: rgb(230, 216, 116);">UPDATE_ITEM</span><span class="token operator" style="color: rgb(248, 248, 242);">:</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: rgb(248, 248, 242);">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    state</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">first</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">second</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">someId</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">fourth</span><span class="token plain"> </span><span class="token operator" style="color: rgb(248, 248, 242);">=</span><span class="token plain"> action</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">someValue</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span></div><div class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This is clearly <em>much</em> shorter and easier to read. However, <strong>this <em>only</em> works correctly if you are using the "magic"
<code>createReducer</code> function from Redux Toolkit</strong> that wraps this reducer in Immer's <a href="https://immerjs.github.io/immer/produce" target="_blank" rel="noopener noreferrer"><code>produce</code> function</a>.
<strong>If this reducer is used without Immer, it will actually mutate the state!</strong>. It's also not obvious just by
looking at the code that this function is actually safe and updates the state immutably. Please make sure you understand
the concepts of immutable updates fully. If you do use this, it may help to add some comments to your code that explain
your reducers are using Redux Toolkit and Immer.</p><p>In addition, Redux Toolkit's <a href="https://redux-toolkit.js.org/api/createSlice" target="_blank" rel="noopener noreferrer"><code>createSlice</code> utility</a> will auto-generate action creators
and action types based on the reducer functions you provide, with the same Immer-powered update capabilities inside.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="https://redux.js.org/recipes/structuring-reducers/reusing-reducer-logic"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Reusing Reducer Logic</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="https://redux.js.org/recipes/structuring-reducers/initializing-state"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Initializing State »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#updating-nested-objects" class="table-of-contents__link">Updating Nested Objects</a></li><li><a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#inserting-and-removing-items-in-arrays" class="table-of-contents__link">Inserting and Removing Items in Arrays</a></li><li><a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#updating-an-item-in-an-array" class="table-of-contents__link">Updating an Item in an Array</a></li><li><a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#immutable-update-utility-libraries" class="table-of-contents__link">Immutable Update Utility Libraries</a></li><li><a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns/#simplifying-immutable-updates-with-redux-toolkit" class="table-of-contents__link">Simplifying Immutable Updates with Redux Toolkit</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="https://redux.js.org/introduction/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="https://redux.js.org/faq">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="https://redux.js.org/api/api-reference">API Reference</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord</a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="https://redux.js.org/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com/">
                  <img src="./Immutable Update Patterns _ Redux_files/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_31Aa"><img class="footer__logo" alt="Redux Logo" src="./Immutable Update Patterns _ Redux_files/redux.svg"></a></div><div class="footer__copyright">Copyright © 2015–2021 Dan Abramov and the Redux documentation authors.</div></div></div></footer></div>
<script src="./Immutable Update Patterns _ Redux_files/styles.d769c6f0.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/runtime_main.187fb712.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/main.3eee0df9.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/1.643e92d1.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/2.265c5038.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/83.e9376293.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/86.499b2dd9.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/935f2afb.28535823.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/17896441.2f07d1d9.js"></script>
<script src="./Immutable Update Patterns _ Redux_files/f65c68cc.4cb8caf6.js"></script>

</body></html>